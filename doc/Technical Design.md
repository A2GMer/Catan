-------------------------
# カタン（Catan）の詳細設計
-------------------------
（前提条件）
- 4人プレイヤー
- 森(4)、畑(4)、草原(4)、岩(3)、鉱山(3)、砂漠(1)の計19枚
- ポートの位置は固定(シャッフルしない)
- 砂漠の位置もランダム
- その他のカード枚数等は無限（追加機能で改良予定）
-------------------------
（追加機能）
- 特別カード機能（最大騎士力、最長交易路）
- カード枚数の有限化
	- 騎士カードは14枚
	- ポイントカードは5枚
	- 街道建設カードは2枚
	- 発見カードは2枚
	- 独占カードは2枚
-------------------------

## 処理内容
### メイン処理
1. 初期化
	1. 順番決め【サイコロ機能】
	2. タイルの配置決め（ランダム）
	3. ポートの配置決め
	4. 番号を決める（★要調査★何らかのアルゴ）
	5. 開拓地&街道のセット
	6. 順番通りに4をプレイヤー人数分繰り返す
	7. 順番をリバースして4をプレイヤー人数分繰り返す

2. ゲーム開始(何れかのプレイヤーの得点が10点になるまでループ)
	2. ターン開始
		1. 初期化
			1. 発展カードの使用をアクティブにする【発展カード機能】
		2. サイコロを振る【サイコロ機能（戻り値：2～12の数字のいずれか一つ）】
		3. 7がでれば泥棒【泥棒発動機能】
		3. 資源分配【資源取得機能（引数：2～12の数字のいずれか一つ）】
		4. ターンエンドするまでループ
			1. ターンエンドをアクティブにする
			2. 交換の使用をアクティブにする【カード交換機能】
			3. 建築の使用をアクティブにする【建築機能】
		
3. ゲーム終了
	1. 得点の表示
	2. 勝利者の表示


### 【サイコロ機能】
1. 1～6をランダムで算出(乱数①)
2. 1～6をランダムで算出(乱数②)
3. 乱数①と②を合算(サイコロ結果)
4. サイコロ結果(2～12の数字のいずれか一つ)を呼び出し元に返す

### 【発展カード機能（引数：プレイヤー情報）】
1. プレイヤーに発展カードがあるかを判定
	- なければなにもしない
2. 所持する発展カードのうち、使用するカードを選択
3. 発展カードごとの機能を実行
【騎士カード機能】【ポイントカード機能】【街道建設機能】【発見カード機能】【独占カード機能】


### 【資源取得機能(引数：2～12までの数字)】
1. 引数の数字を持つタイルを検索
2. ヒットしたタイル分以下の処理をループ
	1. 泥棒いるかフラグでジャッジ
		- 泥棒がいればループ終了
	2. タイルに属するプレイヤーを選定
	3. 2で選定したプレイヤーがもつ建設物情報を取得(開拓地? 都市?)
	4. 資源を与える(開拓地：+1, 都市：+2)【資源増加機能（引数：Player.ID、枚数、資源種別）】

### 【資源増加機能（引数：Player.ID、枚数、資源種別）】
1. プレイヤーに「枚数」分、「資源種別」を増加させる

### 【資源減少機能（引数：Player.ID、枚数、資源種別）】
1. プレイヤーに「枚数」分、「資源種別」を減少させる

### 【カード交換機能（引数：プレイヤー情報）】
1. 【銀行交換】【発展カードとの交換】【プレイヤーとの交換】


### 【泥棒発動機能】
1. 8枚以上の資源カードをもつプレイヤーを検索
2. 1でヒットしたプレイヤー人数分ループ
	1. 保持するカード枚数を取得
	2. 1で取得した数 / 2の切り捨て数を取得
	3. 捨てるカードを選択
	4. カードを削除
# 以下は、騎士カードでも使用するため関数化（泥棒の移動）
3. 好きなタイル上へ泥棒を移動させる
4. タイルに所属するプレイヤーを選択
5. プレイヤーからランダムで1枚カードを譲渡

### 【騎士カード機能】
1. 「泥棒発動機能」内の（泥棒の移動）を呼び出すのみ
2. プレイヤーの「騎士カード使用回数」を+1


### 【ポイントカード機能】
1. プレイヤーの「得点」を+1

### 【街道建設機能】
1. 街道建設可能なエリアを捜索### 【建設可能エリア捜索機能（引数：Player.ID、建設種別 戻り値：位置情報）】
2. プレイヤーの「街道保持数」を+1

### 【発見カード機能】
1. 指定した資源を取得【資源増加機能（引数：Player.ID、枚数、資源種別）】


### 【独占カード機能】
1. 指定した資源を取得【資源増加機能（引数：Player.ID、枚数、資源種別）】
2. 自分以外のPlayer以外でループ
	1. Playerの指定資源カードの枚数を取得
	2. 指定した資源を削除【資源減少機能（引数：Player.ID、枚数、資源種別）】


### 【建築機能】
1. 建設可能な建設物を捜索
2. 建設可能な建設物をアクティブにする
3. 【街道建設機能】【開拓地建設機能】【都市建設機能】


### 【建設可能エリア捜索機能（引数：Player.ID、建設種別 戻り値：位置情報）】
★要調査★碁盤上のマスと、その間のエッジをどのようなデータ形式で保持するのかを調査



## Class
#### 【プレイヤークラス(Player)】
- ID（数値型）
- 名前
- 得点
- 保持する建築物の情報(Buildingクラス型リスト)
- 資源カードリスト(Materialクラス型リスト)
- 発展カードリスト(Devクラス型リスト)
- 騎士カード使用回数
- 街道保持数

#### 【タイルクラス(Tile)】
- ID
- 数字
- 資源種別
- 泥棒いるかフラグ
- Player.ID（List型）

#### 【資源カードクラス(Material)】
- 資源カード種別

#### 【発展カードクラス(Dev)】
- 発展カード種別

#### 【建築物クラス(Building)】
- Player.ID
- Tile.ID
- 建築物情報

### 依存関係
- Tiles > Player > Building

## 構造体
### 【建築物情報(Building)】建築物名：得点
- 開拓地：1
- 都市：2
- 街道：0



# 参考にしたサイト
https://github.com/rosshamish/catan-spectator
